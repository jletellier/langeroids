!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=window.langeroids=a("./lib/langeroids");d._=window._,d._&&d._.extend||console.error("Langeroids requires Underscore/Lo-Dash to function properly. Please add one of the libraries *before* you add Langeroids."),d.ComponentManager=a("./lib/component-manager"),d.EntityManager=a("./lib/entity-manager"),d.EventLogger=a("./lib/event-logger"),d.AnimationLoop=a("./lib/animation-loop"),d.Timer=a("./lib/timer")},{"./lib/animation-loop":2,"./lib/component-manager":3,"./lib/entity-manager":4,"./lib/event-logger":5,"./lib/langeroids":6,"./lib/timer":7}],2:[function(a,b,c){var d=a("./langeroids"),e=d._,f=a("./timer"),g={id:"animation-loop",autoStart:!0,time:null,elapsed:0},h=b.exports=function(a){e.extend(this,g,a)};e.extend(h.prototype,{start:function(){this.startLoop()},startLoop:function(){function a(c){b.requestId=requestAnimationFrame(a),b.elapsed=c-b.time,b.time=c,b.elapsed>0&&b.run()}var b=this;this.requestId=requestAnimationFrame(a)},stop:function(){cancelAnimationFrame(this.requestId)},run:function(){this.emit("update")},onInit:function(a){this.cm=a,this.autoStart&&this.start()},getTimer:function(a){return new f(a,this)}})},{"./langeroids":6,"./timer":7}],3:[function(a,b,c){var d=a("./langeroids"),e=d._,f={id:"component-manager",initialized:!1},g=b.exports=function(a){e.extend(this,f,a),this.setMaxListeners(0),this.components=[],this.componentsMap={},this.workers=[]};d.inherits(g,d.EventEmitter);var h=g.super_;e.extend(g.prototype,{emit:function(a,b,c,d){h.prototype.emit.apply(this,[a,b,d]),e.isArray(c)||(c=[]);for(var f=b,g=0;g<this.workers.length;g++){var i=this.workers[g];i._listeners[a]===!0&&("init"===a&&(f=null),i.postMessage({type:a,args:f,callerId:d},c))}h.prototype.emit.apply(this,["default",a,b,d])},init:function(){this.sort(),this.removeAllListeners();for(var a=this.components,b=0;b<a.length;b++)a[b].useConcurrency||d.setComponentListeners(this,a[b],!0);this.emit("init",this,null,this.id),this.initialized=!0},add:function(a){d.findComponentListeners(a),this.setComponentMethods(a),this.components.push(a),e.isString(a.id)&&(this.componentsMap[a.id]=a),a.useConcurrency&&this.createWorker(a),this.initialized&&this.init()},setComponentMethods:function(a){var b=this;a instanceof d.EventEmitter||(a.emit=function(a,c,d){b.emit.apply(b,[a,c,d,this.id])}),a.getComponent=function(a){return b.getById(a)}},sort:function(){this.components=e.sortBy(this.components,"sortIndex")},getById:function(a){return e.isString(a)?this.componentsMap[a]:!1},workerMessageEvent:function(a){this.emit(a.data.type,a.data.args,null,a.target._componentId)},createWorker:function(a){a=e.isString(a)?this.componentsMap[a]:a;var b="Class.prototype.",c=[];e.each(e.keys(a),function(d){c.push(e.isFunction(a[d])?b+d+"="+a[d].toString():b+d+"="+JSON.stringify(a[d]))});var d=function(){var a=new Class;a.emit=function(a,b,c){self.postMessage({type:a,args:b},c)},self.addEventListener("message",function(b){var c=b.data.type;c="on"+c.charAt(0).toUpperCase()+c.slice(1),"function"==typeof a[c]&&a[c](b.data.args,b.data.callerId)},!1)}.toString(),f=new Blob(["var Class = function() {};",c.join(";"),";","(",d,")()"],{type:"application/javascript"}),g=URL.createObjectURL(f),h=new Worker(g);h._listeners=a._listeners,h._componentId=a.id,this.workers.push(h),h.addEventListener("message",this.workerMessageEvent.bind(this),!1),URL.revokeObjectURL(g)}})},{"./langeroids":6}],4:[function(a,b,c){var d=a("./langeroids"),e=d._,f={id:"entity-manager",initialized:!1},g=b.exports=function(a){e.extend(this,f,a),this.setMaxListeners(0),this.entities=[]};d.inherits(g,d.EventEmitter),e.extend(g.prototype,{onDefault:function(a){this.emit.apply(this,Array.prototype.slice.call(arguments,0))},onInit:function(){this.initialized=!0},onUpdate:function(){for(var a=!1,b=0;b<this.entities.length;b++)this.entities[b].killed&&(a=!0);if(a){var c=this;this.entities=e.filter(this.entities,function(a){return a.killed&&d.removeComponentListeners(c,a),!a.killed})}},setEntityMethods:function(a){var b=this;a.emit=function(a,c){b.emit.apply(b,arguments)},a.getComponent=function(a){return b.getComponent(a)}},add:function(a){this.entities.push(a),this.setEntityMethods(a),d.findComponentListeners(a),d.setComponentListeners(this,a),this.initialized&&e.isFunction(a.onInit)&&a.onInit()},sort:function(){this.entities=e.sortBy(this.entities,"sortIndex")}})},{"./langeroids":6}],5:[function(a,b,c){var d=a("./langeroids"),e=d._,f={id:"event-logger",console:!1,excludedEvents:[]},g=b.exports=function(a){e.extend(this,f,a)};e.extend(g.prototype,{onDefault:function(a,b,c){this.console&&-1===e.indexOf(this.excludedEvents,a)&&console.log('Event: "'+a+'" from "'+c+'"',b)}})},{"./langeroids":6}],6:[function(a,b,c){(function(d){var e=d;if(c=b.exports={_:{},inherits:a("inherits"),EventEmitter:a("events").EventEmitter,browser:"undefined"!=typeof window&&e===window},c.browser){var f=navigator.userAgent.toLowerCase(),g={iphone:/iphone/.test(f),ipod:/ipod/.test(f),ipad:/ipad/.test(f),android:/android/.test(f),blackberry:/blackberry/.test(f),nexus7:/nexus 7/.test(f),windowsPhone:/windows phone/.test(f)};g.ios=g.iphone||g.ipod||g.ipad,g.mobile=g.ios||g.android||g.blackberry||g.windowsPhone,c.device=g}!function(){var a=0;if(c.browser)for(var b=["webkit","moz"],d=0;d<b.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),f=Math.max(0,16-(d-a)),g=e.setTimeout(function(){b(d+f)},f);return a=d+f,g}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(a){clearTimeout(a)})}(),c.createComponent=function(a,b,d,e,f){var g=c._,h=g.isFunction(f),i=g.isFunction(e)?e:function(b){h&&f.call(this,b),g.assign(this,a,b)};return h&&c.inherits(i,f),g.assign(i.prototype,b),g.assign(i,d),i},c.findComponentListeners=function(a){var b=c._,d=a._listeners={},e=a._onceListeners={};b.forEach(b.functions(a),function(a){if(0===a.indexOf("on",0)){var b=0===a.indexOf("once",0),c=a.substr(b?4:2);c.length>0&&(c=c.substr(0,1).toLowerCase()+c.substr(1),d[c]=!0,b&&(e[c]=!0))}})},c.setComponentListeners=function(a,b,d){var e=c._,f=b._listeners,g=b._onceListeners;e.forEach(f,function(c,e){if(d&&c||c===!0){var h=g[e]?"once":"on",i=h+e.substr(0,1).toUpperCase()+e.substr(1),j=b[i].bind(b);f[e]=j,a[h](e,j)}})},c.removeComponentListeners=function(a,b,d){var e=c._,f=b._listeners;d=d||e.keys(b._listeners);for(var g=0;g<d.length;g++){var h=d[g];f[h]&&(a.removeListener(d[g],f[h]),f[h]=!0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{events:8,inherits:9}],7:[function(a,b,c){var d=a("./langeroids"),e=d._,f={animationLoop:null,tStart:null,tDuration:0},g=b.exports=function(a,b){e.extend(this,f),e.isUndefined(b)||(this.animationLoop=b),e.isObject(a)?e.extend(this,a):e.isNumber(a)&&this.set(a)};e.extend(g.prototype,{set:function(a){this.tStart=this.animationLoop.time,this.tDuration=a||this.tDuration},remaining:function(){return this.tDuration-(this.animationLoop.time-this.tStart)},repeat:function(){this.tStart=this.animationLoop.time},done:function(a){var b=this.remaining()<=0;return b&&a&&this.repeat(),b}})},{"./langeroids":6}],8:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],9:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}]},{},[1]);