!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=window.langeroids=a("./lib/langeroids");Object.assign||console.error('Langeroids requires the ECMAScript 2015 (ES6) feature "Object.assign" to function. Please provide a polyfill or use a supported browser: http://browsehappy.com/'),d.ComponentManager=a("./lib/component-manager"),d.EntityManager=a("./lib/entity-manager"),d.EventLogger=a("./lib/event-logger"),d.AnimationLoop=a("./lib/animation-loop"),d.Timer=a("./lib/timer")},{"./lib/animation-loop":2,"./lib/component-manager":3,"./lib/entity-manager":4,"./lib/event-logger":5,"./lib/langeroids":6,"./lib/timer":7}],2:[function(a,b,c){"use strict";var d=a("./timer"),e={id:"animation-loop",autoStart:!0,time:null,elapsed:0},f=function(a){Object.assign(this,e,a)};Object.assign(f.prototype,{start:function(){this.startLoop()},startLoop:function(){function a(c){b.requestId=requestAnimationFrame(a),b.elapsed=c-b.time,b.time=c,b.elapsed>0&&b.run()}var b=this;this.requestId=requestAnimationFrame(a)},stop:function(){cancelAnimationFrame(this.requestId)},run:function(){this.emit("update")},onInit:function(a){this.cm=a,this.autoStart&&this.start()},getTimer:function(a){return new d(a,this)}}),b.exports=f},{"./timer":7}],3:[function(a,b,c){"use strict";var d=a("./langeroids"),e={id:"component-manager",initialized:!1},f=function(a){Object.assign(this,e,a),this.setMaxListeners(0),this.components=[],this.componentsMap={},this.workers=[]};d.inherits(f,d.EventEmitter);var g=f.super_;Object.assign(f.prototype,{emit:function(a,b,c,e){g.prototype.emit.apply(this,[a,b,e]),d.isArray(c)||(c=[]);for(var f=b||[],h=0;h<this.workers.length;h++){var i=this.workers[h];i._listeners[a]===!0&&("init"===a&&(f=null),i.postMessage({type:a,args:f,callerId:e},c))}g.prototype.emit.apply(this,["default",a,b,e])},init:function(){this.sort(),this.removeAllListeners();for(var a=this.components,b=0;b<a.length;b++)a[b].useConcurrency||d.setComponentListeners(this,a[b],!0);this.emit("init",this,null,this.id),this.initialized=!0},add:function(a){d.findComponentListeners(a),this.setComponentMethods(a),this.components.push(a),d.isString(a.id)&&(this.componentsMap[a.id]=a),a.useConcurrency&&this.createWorker(a),this.initialized&&this.init()},setComponentMethods:function(a){var b=this;a instanceof d.EventEmitter||(a.emit=function(a,c,d){b.emit.apply(b,[a,c,d,this.id])}),a.getComponent=function(a){return b.getById(a)}},sort:function(){},getById:function(a){return d.isString(a)?this.componentsMap[a]:!1},workerMessageEvent:function(a){this.emit(a.data.type,a.data.args,null,a.target._componentId)},createWorker:function(a){a=d.isString(a)?this.componentsMap[a]:a;var b="Class.prototype.",c=[];Object.keys(a).forEach(function(d){"function"==typeof a[d]?c.push(b+d+"="+a[d].toString()):c.push(b+d+"="+JSON.stringify(a[d]))});var e=function(){var a=new Class;a.emit=function(a,b,c){self.postMessage({type:a,args:b},c)},self.addEventListener("message",function(b){var c=b.data.type;c="on"+c.charAt(0).toUpperCase()+c.slice(1),"function"==typeof a[c]&&a[c](b.data.args,b.data.callerId)},!1)}.toString(),f=new Blob(["var Class = function() {};",c.join(";"),";","(",e,")()"],{type:"application/javascript"}),g=URL.createObjectURL(f),h=new Worker(g);h._listeners=a._listeners,h._componentId=a.id,this.workers.push(h),h.addEventListener("message",this.workerMessageEvent.bind(this),!1),URL.revokeObjectURL(g)}}),b.exports=f},{"./langeroids":6}],4:[function(a,b,c){var d=a("./langeroids"),e=d._,f={id:"entity-manager",initialized:!1},g=b.exports=function(a){e.extend(this,f,a),this.setMaxListeners(0),this.entities=[]};d.inherits(g,d.EventEmitter),e.extend(g.prototype,{onDefault:function(a){this.emit.apply(this,Array.prototype.slice.call(arguments,0))},onInit:function(){this.initialized=!0},onUpdate:function(){for(var a=!1,b=0;b<this.entities.length;b++)this.entities[b].killed&&(a=!0);if(a){var c=this;this.entities=e.filter(this.entities,function(a){return a.killed&&d.removeComponentListeners(c,a),!a.killed})}},setEntityMethods:function(a){var b=this;a.emit=function(a,c){b.emit.apply(b,arguments)},a.getComponent=function(a){return b.getComponent(a)}},add:function(a){this.entities.push(a),this.setEntityMethods(a),d.findComponentListeners(a),d.setComponentListeners(this,a),this.initialized&&e.isFunction(a.onInit)&&a.onInit()},sort:function(){this.entities=e.sortBy(this.entities,"sortIndex")}})},{"./langeroids":6}],5:[function(a,b,c){var d=a("./langeroids"),e=d._,f={id:"event-logger",console:!1,excludedEvents:[]},g=b.exports=function(a){e.extend(this,f,a)};e.extend(g.prototype,{onDefault:function(a,b,c){this.console&&-1===e.indexOf(this.excludedEvents,a)&&console.log('Event: "'+a+'" from "'+c+'"',b)}})},{"./langeroids":6}],6:[function(a,b,c){(function(c){"use strict";var d=c,e={inherits:a("inherits"),EventEmitter:a("events").EventEmitter,browser:"undefined"!=typeof window&&d===window};e.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},e.isString=function(a){return"string"==typeof a||a instanceof String},e.createComponent=function(a,b,c,d,f){var g="function"==typeof f,h="function"==typeof d?d:function(b){g&&f.call(this,b),Object.assign(this,a,b)};return g&&e.inherits(h,f),Object.assign(h.prototype,b),Object.assign(h,c),h},e.findComponentListeners=function(a){var b=a._listeners={},c=a._onceListeners={};for(var d in a)if("function"==typeof a[d]&&0===d.indexOf("on",0)){var e=0===d.indexOf("once",0),f=d.substr(e?4:2);f.length>0&&(f=f.substr(0,1).toLowerCase()+f.substr(1),b[f]=!0,e&&(c[f]=!0))}},e.setComponentListeners=function(a,b,c){var d=b._listeners,e=b._onceListeners;for(var f in d)if(d.hasOwnProperty(f)){var g=d[f];if(c&&g||g===!0){var h=e[f]?"once":"on",i=h+f.substr(0,1).toUpperCase()+f.substr(1),j=b[i].bind(b);d[f]=j,a[h](f,j)}}},e.removeComponentListeners=function(a,b,c){var d=b._listeners;c=c||Object.keys(b._listeners);for(var e=0;e<c.length;e++){var f=c[e];d[f]&&(a.removeListener(c[e],d[f]),d[f]=!0)}},b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{events:8,inherits:9}],7:[function(a,b,c){"use strict";var d={animationLoop:null,tStart:null,tDuration:0},e=function(a,b){Object.assign(this,d),void 0!==b&&(this.animationLoop=b),isNaN(a)?Object.assign(this,a):this.set(a)};Object.assign(e.prototype,{set:function(a){this.tStart=this.animationLoop.time,this.tDuration=a||this.tDuration},remaining:function(){return this.tDuration-(this.animationLoop.time-this.tStart)},repeat:function(){this.tStart=this.animationLoop.time},done:function(a){var b=this.remaining()<=0;return b&&a&&this.repeat(),b}}),b.exports=e},{}],8:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],9:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}]},{},[1]);